{"code":"webpackHotUpdate(0,{85:function(e,t,a){\"use strict\";var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=l(a(1)),s=a(23),d=l(a(76));l(a(69));function l(e){return e&&e.__esModule?e:{default:e}}var r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.predict=function(){(document.getElementById(\"radioid1\").setAttribute(\"disabled\",\"disabled\"),document.getElementById(\"radioid2\").setAttribute(\"disabled\",\"disabled\"),document.getElementById(\"buttonid\").setAttribute(\"disabled\",\"disabled\"),n.state.isMediaURL)?document.getElementById(\"textInputId\").setAttribute(\"disabled\",\"disabled\"):document.getElementById(\"filebaseId\").style.visibility=\"hidden\";n.setState({loaded:!1});var e=\"\";e=0==n.state.isMediaURL?n.state.base64Variable:n.state.URL,new(a(65).App)({apiKey:\"a12da306719d43f391258c3c375ee035\"}).models.predict(\"a403429f2ddf4b49b307e318f00e528b\",e).then(function(e){var t=this,a=\"\";if(void 0==e.outputs[0].data.regions)this.setState({numberOfFaces:0,boundingBoxArray:[],showCanvasFlag:!0,loaded:!0,noFacesFound:!0});else if(\"10000\"!=e.status.code)window.alert(\"We are sorry, something went wrong. Please try again!\"),this.setState({numberOfFaces:0,boundingBoxArray:[],loaded:!0});else{e.outputs[0].data.regions.map(function(e){return t.state.faceRegionArray.push(e)}),a=e.outputs[0].data.regions.length;for(var n=0;n<e.outputs[0].data.regions.length;n++)this.state.boundingBoxArray.push(this.state.faceRegionArray[n].region_info.bounding_box);this.setState({numberOfFaces:a,boundingBoxArray:this.state.boundingBoxArray,showCanvasFlag:!0,noFacesFound:!1})}this.drawBoundingBoxes()}.bind(n),function(e){(console.error(e),window.alert(\"We are sorry, something went wrong. Please try again with a different URL!\"),this.setState({numberOfFaces:0,boundingBoxArray:[],loaded:!0}),document.getElementById(\"radioid1\").removeAttribute(\"disabled\"),document.getElementById(\"radioid2\").removeAttribute(\"disabled\"),document.getElementById(\"buttonid\").removeAttribute(\"disabled\"),this.state.isMediaURL)?document.getElementById(\"textInputId\").removeAttribute(\"disabled\"):document.getElementById(\"filebaseId\").style.visibility=\"visible\"}.bind(n))},n.state={isMediaURL:!1,selectedOption:\"upload\",files:[],numberOfFaces:0,responseInState:null,base64Variable:\"\",URL:\"\",faceRegionArray:[],boundingBoxArray:[],showCanvasFlag:!1,loaded:!0,imageAddress:\"\",noFacesFound:!1},n.handleOptionChange=n.handleOptionChange.bind(n),n}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),n(t,[{key:\"handleOptionChange\",value:function(e){this.setState({selectedOption:e.target.value,isMediaURL:!this.state.isMediaURL,URL:\"\",base64Variable:\"\",faceRegionArray:[],boundingBoxArray:[],imageAddress:\"\",numberOfFaces:0});for(var t=document.getElementById(\"filebaseId\").getElementsByTagName(\"*\"),a=0;a<t.length;a++)t[a].disabled=!this.state.isMediaURL}},{key:\"getFiles\",value:function(e){null!=document.getElementById(\"canvasid\")&&document.body.removeChild(canvasid);var t=new RegExp(\"data:image/jpeg;base64,\"),a=new RegExp(\"data:image/png;base64,\"),n=new RegExp(\"data:image/img;base64,\"),i=new RegExp(\"data:image/svg;base64,\"),s=new RegExp(\"data:image/jpg;base64,\");if(t.test(e[0].base64)){var d=e[0].base64.replace(\"data:image/jpeg;base64,\",\"\");this.setState({files:e,base64Variable:d,faceRegionArray:[],boundingBoxArray:[],imageAddress:e[0].base64})}else if(a.test(e[0].base64)){d=e[0].base64.replace(\"data:image/png;base64,\",\"\");this.setState({files:e,base64Variable:d,faceRegionArray:[],boundingBoxArray:[],imageAddress:e[0].base64})}else if(n.test(e[0].base64)){d=e[0].base64.replace(\"data:image/img;base64,\",\"\");this.setState({files:e,base64Variable:d,faceRegionArray:[],boundingBoxArray:[],imageAddress:e[0].base64})}else if(i.test(e[0].base64)){d=e[0].base64.replace(\"data:image/svg;base64,\",\"\");this.setState({files:e,base64Variable:d,faceRegionArray:[],boundingBoxArray:[],imageAddress:e[0].base64})}else{if(!s.test(e[0].base64))return window.alert(\"Please try again with an image of valid format!\"),void this.setState({files:\"\",base64Variable:\"\",faceRegionArray:[],boundingBoxArray:[],imageAddress:\"\",numberOfFaces:0});d=e[0].base64.replace(\"data:image/jpg;base64,\",\"\");this.setState({files:e,base64Variable:d,faceRegionArray:[],boundingBoxArray:[],imageAddress:e[0].base64})}}},{key:\"handleURLChange\",value:function(e){null!=document.getElementById(\"canvasid\")&&document.body.removeChild(canvasid);var t=new RegExp(\"https://\"),a=new RegExp(\"http://\");t.test(e.target.value)||a.test(e.target.value)||\"\"==e.target.value?this.setState({URL:e.target.value,faceRegionArray:[],boundingBoxArray:[],showCanvasFlag:!1,numberOfFaces:0,imageAddress:\"\"}):window.alert(\"Please paste a link starting with - https:// or http://\")}},{key:\"drawBoundingBoxes\",value:function(){var e=\"\",t=document.getElementById(\"imageDisplay\").getBoundingClientRect();(e=document.createElement(\"canvas\")).setAttribute(\"id\",\"canvasid\"),e.width=window.innerWidth,e.height=window.innerHeight,e.style.position=\"absolute\",e.style.left=0,e.style.top=0,e.style.zIndex=1e5,e.style.pointerEvents=\"none\",document.body.appendChild(e);for(var a=e.getContext(\"2d\"),n=0;n<this.state.boundingBoxArray.length;n++){var i=this.state.boundingBoxArray[n].left_col*t.width+t.width+60,s=this.state.boundingBoxArray[n].top_row*t.height+80,d=500*(this.state.boundingBoxArray[n].right_col-this.state.boundingBoxArray[n].left_col),l=500*(this.state.boundingBoxArray[n].bottom_row-this.state.boundingBoxArray[n].top_row);a.rect(i,s,d,l),a.lineWidth=3,a.strokeStyle=\"white\",a.stroke(),this.setState({loaded:!0})}(document.getElementById(\"radioid1\").removeAttribute(\"disabled\"),document.getElementById(\"radioid2\").removeAttribute(\"disabled\"),document.getElementById(\"buttonid\").removeAttribute(\"disabled\"),this.state.isMediaURL)?document.getElementById(\"textInputId\").removeAttribute(\"disabled\"):document.getElementById(\"filebaseId\").style.visibility=\"visible\"}},{key:\"render\",value:function(){var e=this,t=a(32),n=this.state.URL?i.default.createElement(\"img\",{src:this.state.URL,id:\"imageDisplay\",alt:\"\",style:{width:600,height:500,position:\"absolute\"}}):i.default.createElement(\"img\",{src:this.state.imageAddress,id:\"imageDisplay\",alt:\"\",style:{width:600,height:500,position:\"absolute\"}}),s=(this.state.isMediaURL?i.default.createElement(\"div\",null,\" \",i.default.createElement(\"input\",{id:\"textInputId\",type:\"text\",name:\"name\",placeholder:\"Paste URL here\",value:this.state.URL,onChange:function(t){return e.handleURLChange(t)}}),\" \"):i.default.createElement(\"div\",{id:\"filebaseId\"},\" \",i.default.createElement(d.default,{multiple:!0,onDone:this.getFiles.bind(this)}),\" \"),this.state.URL||this.state.base64Variable?i.default.createElement(\"button\",{id:\"buttonid\",className:\"btn btn-success\",onClick:this.predict},\"Predict!\"):null);return i.default.createElement(\"div\",null,i.default.createElement(\"h1\",{className:\"heading\"},\"Face Detection\"),i.default.createElement(\"div\",{className:\"container\"},i.default.createElement(t,{loaded:this.state.loaded}),i.default.createElement(\"br\",null),i.default.createElement(\"div\",{className:\"row\"},i.default.createElement(\"div\",{className:\"col-6\",id:\"textDisplay\"},i.default.createElement(\"div\",{className:\"upload\"},i.default.createElement(\"label\",null,i.default.createElement(\"input\",{id:\"radioid1\",type:\"radio\",value:\"upload\",checked:\"upload\"===this.state.selectedOption,onChange:this.handleOptionChange.bind(this)}),\"Upload Image\"),(this.state.isMediaURL,i.default.createElement(\"div\",{id:\"filebaseId\"},\" \",i.default.createElement(d.default,{multiple:!0,onDone:this.getFiles.bind(this)}),\" \"))),i.default.createElement(\"div\",{className:\"url\"},i.default.createElement(\"label\",null,i.default.createElement(\"input\",{id:\"radioid2\",type:\"radio\",value:\"URL\",checked:\"URL\"===this.state.selectedOption,onChange:this.handleOptionChange.bind(this)}),\"Paste URL\"),this.state.isMediaURL?i.default.createElement(\"div\",null,\" \",i.default.createElement(\"input\",{id:\"textInputId\",type:\"text\",name:\"name\",placeholder:\"Paste URL here\",value:this.state.URL,onChange:function(t){return e.handleURLChange(t)}}),\" \"):i.default.createElement(\"div\",null,\" \",i.default.createElement(\"input\",{id:\"textInputId\",disabled:!0,type:\"text\",name:\"name\",placeholder:\"Paste URL here\",value:this.state.URL,onChange:function(t){return e.handleURLChange(t)}}),\" \")),s,i.default.createElement(\"br\",null),i.default.createElement(\"br\",null),this.state.noFacesFound?i.default.createElement(\"h3\",null,\"No Faces Detected.\"):i.default.createElement(\"h3\",null,\"Faces Detected : \",this.state.numberOfFaces,\" \")),i.default.createElement(\"div\",{className:\"col-6\",id:\"imageDisplay\"},n))))}}]),t}();(0,s.render)(i.default.createElement(r,null),window.document.getElementById(\"app\"))}});","extractedComments":[]}