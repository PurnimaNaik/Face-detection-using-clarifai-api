{"code":"webpackHotUpdate(0,{85:function(e,t,a){\"use strict\";var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),n=r(a(1)),s=a(23),d=r(a(76));r(a(75)),r(a(69));function r(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.predict=function(){(document.getElementById(\"radioid1\").setAttribute(\"disabled\",\"disabled\"),document.getElementById(\"radioid2\").setAttribute(\"disabled\",\"disabled\"),document.getElementById(\"buttonid\").setAttribute(\"disabled\",\"disabled\"),i.state.isMediaURL)?document.getElementById(\"textInputId\").setAttribute(\"disabled\",\"disabled\"):document.getElementById(\"filebaseId\").style.visibility=\"hidden\";i.setState({loaded:!1});var e=\"\";e=0==i.state.isMediaURL?i.state.base64Variable:i.state.URL,new(a(65).App)({apiKey:\"a12da306719d43f391258c3c375ee035\"}).models.predict(\"a403429f2ddf4b49b307e318f00e528b\",e).then(function(e){var t=this,a=\"\";if(void 0==e.outputs[0].data.regions)window.alert(\"No faces detected\"),this.setState({numberOfFaces:0,boundingBoxArray:[],showCanvasFlag:!0,loaded:!0});else if(\"10000\"!=e.status.code)window.alert(\"We are sorry, something went wrong. Please try again!\"),this.setState({numberOfFaces:0,boundingBoxArray:[],loaded:!0});else{e.outputs[0].data.regions.map(function(e){return t.state.faceRegionArray.push(e)}),a=e.outputs[0].data.regions.length;for(var i=0;i<e.outputs[0].data.regions.length;i++)this.state.boundingBoxArray.push(this.state.faceRegionArray[i].region_info.bounding_box);this.setState({numberOfFaces:a,boundingBoxArray:this.state.boundingBoxArray,showCanvasFlag:!0})}this.drawBoundingBoxes()}.bind(i),function(e){(console.error(e),window.alert(\"We are sorry, something went wrong. Please try again with a different URL!\"),this.setState({numberOfFaces:0,boundingBoxArray:[],loaded:!0}),document.getElementById(\"radioid1\").removeAttribute(\"disabled\"),document.getElementById(\"radioid2\").removeAttribute(\"disabled\"),document.getElementById(\"buttonid\").removeAttribute(\"disabled\"),this.state.isMediaURL)?document.getElementById(\"textInputId\").removeAttribute(\"disabled\"):document.getElementById(\"filebaseId\").style.visibility=\"visible\"}.bind(i))},i.state={isMediaURL:!1,selectedOption:\"upload\",files:[],numberOfFaces:0,responseInState:null,base64Variable:\"\",URL:\"\",faceRegionArray:[],boundingBoxArray:[],showCanvasFlag:!1,loaded:!0,imageAddress:\"\"},i.handleOptionChange=i.handleOptionChange.bind(i),i}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.default.Component),i(t,[{key:\"handleOptionChange\",value:function(e){this.setState({selectedOption:e.target.value,isMediaURL:!this.state.isMediaURL,URL:\"\",base64Variable:\"\",faceRegionArray:[],boundingBoxArray:[],imageAddress:\"\",numberOfFaces:0})}},{key:\"getFiles\",value:function(e){null!=document.getElementById(\"canvasid\")&&document.body.removeChild(canvasid);var t=new RegExp(\"data:image/jpeg;base64,\"),a=new RegExp(\"data:image/png;base64,\"),i=new RegExp(\"data:image/img;base64,\"),n=new RegExp(\"data:image/svg;base64,\"),s=new RegExp(\"data:image/jpg;base64,\");if(t.test(e[0].base64)){var d=e[0].base64.replace(\"data:image/jpeg;base64,\",\"\");this.setState({files:e,base64Variable:d,faceRegionArray:[],boundingBoxArray:[],imageAddress:e[0].base64})}else if(a.test(e[0].base64)){d=e[0].base64.replace(\"data:image/png;base64,\",\"\");this.setState({files:e,base64Variable:d,faceRegionArray:[],boundingBoxArray:[],imageAddress:e[0].base64})}else if(i.test(e[0].base64)){d=e[0].base64.replace(\"data:image/img;base64,\",\"\");this.setState({files:e,base64Variable:d,faceRegionArray:[],boundingBoxArray:[],imageAddress:e[0].base64})}else if(n.test(e[0].base64)){d=e[0].base64.replace(\"data:image/svg;base64,\",\"\");this.setState({files:e,base64Variable:d,faceRegionArray:[],boundingBoxArray:[],imageAddress:e[0].base64})}else{if(!s.test(e[0].base64))return window.alert(\"Please try again with an image of valid format!\"),void this.setState({files:\"\",base64Variable:\"\",faceRegionArray:[],boundingBoxArray:[],imageAddress:\"\",numberOfFaces:0});d=e[0].base64.replace(\"data:image/jpg;base64,\",\"\");this.setState({files:e,base64Variable:d,faceRegionArray:[],boundingBoxArray:[],imageAddress:e[0].base64})}}},{key:\"handleURLChange\",value:function(e){null!=document.getElementById(\"canvasid\")&&document.body.removeChild(canvasid);var t=new RegExp(\"https://\"),a=new RegExp(\"http://\");t.test(e.target.value)||a.test(e.target.value)||\"\"==e.target.value?this.setState({URL:e.target.value,faceRegionArray:[],boundingBoxArray:[],showCanvasFlag:!1,numberOfFaces:0,imageAddress:\"\"}):window.alert(\"Please paste a link starting with - https:// or http://\")}},{key:\"drawBoundingBoxes\",value:function(){var e=\"\",t=document.getElementById(\"imageDisplay\").getBoundingClientRect();(e=document.createElement(\"canvas\")).setAttribute(\"id\",\"canvasid\"),e.width=window.innerWidth,e.height=window.innerHeight,e.style.position=\"absolute\",e.style.left=0,e.style.top=0,e.style.zIndex=1e5,e.style.pointerEvents=\"none\",document.body.appendChild(e);for(var a=e.getContext(\"2d\"),i=0;i<this.state.boundingBoxArray.length;i++){var n=this.state.boundingBoxArray[i].left_col*t.width+t.width+60,s=this.state.boundingBoxArray[i].top_row*t.height+80,d=500*(this.state.boundingBoxArray[i].right_col-this.state.boundingBoxArray[i].left_col),r=500*(this.state.boundingBoxArray[i].bottom_row-this.state.boundingBoxArray[i].top_row);a.rect(n,s,d,r),a.lineWidth=3,a.strokeStyle=\"white\",a.stroke(),this.setState({loaded:!0})}(document.getElementById(\"radioid1\").removeAttribute(\"disabled\"),document.getElementById(\"radioid2\").removeAttribute(\"disabled\"),document.getElementById(\"buttonid\").removeAttribute(\"disabled\"),this.state.isMediaURL)?document.getElementById(\"textInputId\").removeAttribute(\"disabled\"):document.getElementById(\"filebaseId\").style.visibility=\"visible\"}},{key:\"render\",value:function(){var e=this,t=a(32),i=this.state.URL?n.default.createElement(\"img\",{src:this.state.URL,id:\"imageDisplay\",alt:\"\",style:{width:600,height:500,position:\"absolute\"}}):n.default.createElement(\"img\",{src:this.state.imageAddress,id:\"imageDisplay\",alt:\"\",style:{width:600,height:500,position:\"absolute\"}}),s=this.state.isMediaURL?n.default.createElement(\"div\",null,\" \",n.default.createElement(\"input\",{id:\"textInputId\",type:\"text\",name:\"name\",placeholder:\"Paste URL here\",value:this.state.URL,onChange:function(t){return e.handleURLChange(t)}}),\" \"):n.default.createElement(\"div\",{id:\"filebaseId\"},\" \",n.default.createElement(d.default,{multiple:!0,onDone:this.getFiles.bind(this)}),\" \"),r=this.state.URL||this.state.base64Variable?n.default.createElement(\"button\",{id:\"buttonid\",className:\"btn btn-success\",onClick:this.predict},\"Predict!\"):null;return n.default.createElement(\"div\",{className:\"container\"},n.default.createElement(t,{loaded:this.state.loaded}),n.default.createElement(\"div\",{className:\"row\"},n.default.createElement(\"h1\",{className:\"heading\"},\"Face Detection\")),n.default.createElement(\"div\",{className:\"row\"},n.default.createElement(\"div\",{className:\"col-6\",id:\"textDisplay\"},n.default.createElement(\"h3\",null,\"Predict with Face Detection model!\"),n.default.createElement(\"div\",{className:\"row\"},n.default.createElement(\"div\",{className:\"col-4\"},n.default.createElement(\"div\",{className:\"radio\"},n.default.createElement(\"label\",null,n.default.createElement(\"input\",{id:\"radioid1\",type:\"radio\",value:\"upload\",checked:\"upload\"===this.state.selectedOption,onChange:this.handleOptionChange.bind(this)}),\"Upload Image\")),n.default.createElement(\"div\",{className:\"radio\"},n.default.createElement(\"label\",null,n.default.createElement(\"input\",{id:\"radioid2\",type:\"radio\",value:\"URL\",checked:\"URL\"===this.state.selectedOption,onChange:this.handleOptionChange.bind(this)}),\"Paste URL\"))),n.default.createElement(\"div\",{className:\"col-8\"},s)),r,n.default.createElement(\"br\",null),n.default.createElement(\"br\",null),n.default.createElement(\"h3\",null,\"Number of faces detected : \",this.state.numberOfFaces,\" \")),n.default.createElement(\"div\",{className:\"col-6\"},i)))}}]),t}();(0,s.render)(n.default.createElement(l,null),window.document.getElementById(\"app\"))}});","extractedComments":[]}